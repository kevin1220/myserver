<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>挖金游戏</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/game.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>

<body>
    <div class="p1">
        <img src="images/p1/logo.png" alt="" class="p1_logo">
        <img src="images/p1/gold.png" alt="" class="p1_gold">
        <img src="images/p1/startgame.png" alt="" class="p1_startgame">
    </div>
    <div class="p2">
        <span class="score">0</span>
        <span class="time">30s</span>
        <div class="holes">
            <div class="hole pristine"></div>
            <div class="hole pristine"></div>
            <div class="hole pristine"></div>
            <div class="hole pristine"></div>
            <div class="hole pristine"></div>
            <div class="hole pristine"></div>
            <div class="hole pristine"></div>
            <div class="hole pristine"></div>
            <div class="hole pristine"></div>
            <i style="width: 100%;height: 0; display: inline-block;"></i>
        </div>
    </div>
    <div class="p3">
        <img src="images/p1/gold.png" alt="" class="p3_gold">
        <div class="p3_score">200</div>
        <img src="images/p3/replay.png" class="replay">
    </div>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
    <script type="text/javascript" src="js/zepto.min.js"></script>
    <script type="text/javascript" src="js/tools.js"></script>
    <script type="text/javascript" src="js/game.js"></script>
    <script type="text/javascript">
    $(function() {
        var game;
        $('.p1_startgame').on('click', function() {
            playgame();

        });

        function playgame() {
            game = new Game(null, $('.hole'));
            var time = game.time;
            $('.score').text(0);
            $('.p1').css('display', 'none');
            $('.p2').css('display', 'block');
            $('.p3').css('display', 'none');
            game.start();
            var timmer = setInterval(function() {
                time--;
                $('.time').text(time + 's');
                if (time === 0) {
                    game.stop();
                    clearInterval(timmer);
                    showend();
                }
            }, 1000);
        }

        function showend() {
            //游戏结束时弹出的框
            $('.p3_score').text(game.counter);
            $('.p2').css('display', 'none');
            $('.p3').css('display', 'block');
            $('.replay').on('click', function() {
                playgame();
            });
        }

    })
    </script>
</body>

</html>

<!doctype html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>GetUserMedia实例</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>

<body>
    <video id="video" autoplay></video>
</body>
<script type="text/javascript">
window.onload = function() {
    var getUserMedia = (navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia);
    getUserMedia.call(navigator, {
        video: true,
        audio: true
    }, function(localMediaStream) {
        alert(localMediaStream);
        var video = document.getElementById('video');
        video.src = window.URL.createObjectURL(localMediaStream);
        video.onloadedmetadata = function(e) {
            alert("Label: " + localMediaStream.label);
            alert("AudioTracks", localMediaStream.getAudioTracks());
            alert("VideoTracks", localMediaStream.getVideoTracks());
        };
    }, function(e) {
        alert('Reeeejected!', e);
    });

}
</script>

</html>
